(()=>{"use strict";class t{constructor(){}static toggleDisableScroll(){""===document.body.style.overflow?document.body.style.overflow="hidden":document.body.style.overflow=""}}window.app={burger:new class{#t;constructor(){this.#t=!0,this._burgerButton=document.querySelector(".burger"),this._burgerElements=new Map([["burgerMenu",document.querySelector(".burger-menu")],["burgerMenuItem",document.querySelector(".burger-menu__navigation")],["overlay",document.querySelector(".burger-menu__overlay")]]),this.init()}get getStatus(){return this.#t}set setStatus(t){this.#t=t}init(){this.#e()}#e(){this._burgerButton.addEventListener("click",this.#n.bind(this))}#n(){this._burgerButton.classList.toggle("active"),t.toggleDisableScroll();for(const t of this._burgerElements.values())t.classList.toggle("active");this.#i()}#i(){for(const t of this._burgerElements.values())t.classList.contains("burger-menu")||t.addEventListener("click",this.#r.bind(this))}#r(){const[e]=this._burgerElements.values();if(e.classList.contains("active")){this._burgerButton.classList.remove("active"),t.toggleDisableScroll();for(const t of this._burgerElements.values())t.classList.remove("active");this.#s()}}#s(){for(const t of this._burgerElements.values())t.removeEventListener("click",this.#r)}toString(){return`Status burger: ${this.#t}`}},carousel:function(){function e(t,e,n){let i=[];for(;i.length<t;)i.push(r());return i;function r(){let t,i=[],r=[];for(;r.length<n;)t=Math.floor(Math.random()*n),r.includes(t)||r.push(t);for(;i.length<e;)t=r.shift(),void 0===t?(t=Math.floor(Math.random()*n),i.includes(t)||i.push(t)):s(t)||i.push(t);return i}function s(t){let e=0;if(0===i.length)return!1;for(let n of i)n.includes(t)&&e++;return 6===e}}const n=document.querySelector(".our-friends__container");let i=document.querySelector(".card-animal-container"),r=i.cloneNode(!0);const s=document.querySelector("button.left-end"),a=document.querySelector("button.left"),o=document.querySelector("button.paging-button_active"),l=document.querySelector("button.right"),c=document.querySelector("button.right-end"),d={data:null,randomArray:[],setCache(t){this.data=t},getCache(){return this.data}};function u(){return innerWidth>=1280?"desktop":innerWidth<1280&&innerWidth>=768?"tablet":innerWidth<768&&innerWidth>=320?"mobile":void 0}function m(t,e){let n,i=0;for(let r of t.children)r.setAttribute("data-id",d.randomArray[e-1][i]),n=r.firstElementChild,n.setAttribute("src",d.data[d.randomArray[e-1][i]].img),n.setAttribute("alt",d.data[d.randomArray[e-1][i]].type),n=n.nextElementSibling,n.textContent=d.data[d.randomArray[e-1][i]].name,i++}function g(){l.hasAttribute("disabled")||(l.addEventListener("click",h),c.addEventListener("click",h)),a.hasAttribute("disabled")||(a.addEventListener("click",h),s.addEventListener("click",h)),p(i,"add")}function v(){l.removeEventListener("click",h),c.removeEventListener("click",h),a.removeEventListener("click",h),s.removeEventListener("click",h),p(i,"del")}function h(t){t.currentTarget.classList.contains("left")&&+o.textContent>1&&(v(),b(+o.textContent-1,l),f(+o.textContent-1,a),L(+o.textContent-1),o.textContent=+o.textContent-1),t.currentTarget.classList.contains("left-end")&&+o.textContent>1&&(v(),b(1,l),f(1,a),L(1),o.textContent=1),t.currentTarget.classList.contains("right")&&+o.textContent<d.randomArray.length&&(v(),b(+o.textContent+1,l),f(+o.textContent+1,a),L(+o.textContent+1),o.textContent=+o.textContent+1),t.currentTarget.classList.contains("right-end")&&+o.textContent<d.randomArray.length&&(v(),b(d.randomArray.length,l),f(d.randomArray.length,a),L(d.randomArray.length),o.textContent=d.randomArray.length)}function f(t,e){t>1&&e.hasAttribute("disabled")?(s.removeAttribute("disabled"),a.removeAttribute("disabled"),s.classList.remove("paging-button_inactive"),a.classList.remove("paging-button_inactive"),s.classList.add("paging-button"),a.classList.add("paging-button")):t<=1&&(s.setAttribute("disabled",""),a.setAttribute("disabled",""),s.classList.add("paging-button_inactive"),a.classList.add("paging-button_inactive"),s.classList.remove("paging-button"),a.classList.remove("paging-button"))}function b(t,e){t<d.randomArray.length&&e.hasAttribute("disabled")?(c.removeAttribute("disabled"),l.removeAttribute("disabled"),c.classList.remove("paging-button_inactive"),l.classList.remove("paging-button_inactive"),c.classList.add("paging-button"),l.classList.add("paging-button")):t>=d.randomArray.length&&(c.setAttribute("disabled",""),l.setAttribute("disabled",""),c.classList.add("paging-button_inactive"),l.classList.add("paging-button_inactive"),c.classList.remove("paging-button"),l.classList.remove("paging-button"))}function L(t){m(r,t),n.classList.add("active"),r.classList.add("hide"),i.after(r),r.classList.remove("hide"),r.classList.add("active"),i.remove()}function E(t){"showBlock"===t.animationName&&(n.classList.remove("active"),r.classList.remove("active"),[i,r]=function(t,e){let n=t;return[t=e,e=n]}(i,r),g())}const y=document.querySelector(".modal-window");function p(t,e){if("add"===e)for(let e of t.children)e.addEventListener("click",C);else if("del"===e)for(let e of t.children)e.removeEventListener("click",C)}function C(e){!function(t){let e=y.querySelector(".modal-window__container");e.firstElementChild.firstElementChild.setAttribute("src",d.data[t].img),e.firstElementChild.firstElementChild.setAttribute("alt",d.data[t].type);let n=e.lastElementChild.children;n[0].textContent=d.data[t].name,n[1].textContent=`${d.data[t].type} - ${d.data[t].breed}`,n[2].textContent=d.data[t].description;let i=n[3].children;i[0].firstElementChild.innerHTML=i[0].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${d.data[t].age}`),i[1].firstElementChild.innerHTML=i[1].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${d.data[t].inoculations.join(", ")}`),i[2].firstElementChild.innerHTML=i[2].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${d.data[t].diseases.join(", ")}`),i[3].firstElementChild.innerHTML=i[3].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${d.data[t].parasites.join(", ")}`)}(e.currentTarget.getAttribute("data-id")),y.firstElementChild.addEventListener("click",A),y.lastElementChild.addEventListener("click",A),y.lastElementChild.addEventListener("mouseover",_),y.lastElementChild.addEventListener("mouseout",_),y.classList.add("active"),t.toggleDisableScroll()}function A(){y.classList.remove("active"),t.toggleDisableScroll(),y.firstElementChild.removeEventListener("click",A),y.lastElementChild.removeEventListener("click",A),y.lastElementChild.removeEventListener("mouseover",_),y.lastElementChild.removeEventListener("mouseout",_),document.querySelector(".modal-button").classList.remove("active")}function _(t){"mouseover"==t.type?document.querySelector(".modal-button").classList.add("active"):"mouseout"==t.type&&document.querySelector(".modal-button").classList.remove("active")}!async function(){var t;null===d.data&&await async function(){let t=await fetch("../../data/pets.json");if(t.ok){let e=await t.json();d.setCache(e)}else console.log("error",t.status)}(),d.randomArray="desktop"===(t=u())?e(6,8,8):"tablet"===t?e(8,6,8):"mobile"===t?e(16,3,8):void 0,function(t){if("tablet"===t){for(let t=0;t<2;t++)i.lastElementChild.remove(),r.lastElementChild.remove();for(const t of i.children)t.style.display="flex";for(const t of r.children)t.style.display="flex"}if("mobile"===t){for(let t=0;t<5;t++)i.lastElementChild.remove(),r.lastElementChild.remove();for(const t of i.children)t.style.display="flex";for(const t of r.children)t.style.display="flex"}}(u()),m(i,1),g(),n.addEventListener("animationend",E)}()}()}})();