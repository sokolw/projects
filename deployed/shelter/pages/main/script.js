(()=>{"use strict";class e{constructor(){}static toggleDisableScroll(){""===document.body.style.overflow?document.body.style.overflow="hidden":document.body.style.overflow=""}}window.app={burger:new class{#e;constructor(){this.#e=!0,this._burgerButton=document.querySelector(".burger"),this._burgerElements=new Map([["burgerMenu",document.querySelector(".burger-menu")],["burgerMenuItem",document.querySelector(".burger-menu__navigation")],["overlay",document.querySelector(".burger-menu__overlay")]]),this.init()}get getStatus(){return this.#e}set setStatus(e){this.#e=e}init(){this.#t()}#t(){this._burgerButton.addEventListener("click",this.#n.bind(this))}#n(){this._burgerButton.classList.toggle("active"),e.toggleDisableScroll();for(const e of this._burgerElements.values())e.classList.toggle("active");this.#i()}#i(){for(const e of this._burgerElements.values())e.classList.contains("burger-menu")||e.addEventListener("click",this.#s.bind(this))}#s(){const[t]=this._burgerElements.values();if(t.classList.contains("active")){this._burgerButton.classList.remove("active"),e.toggleDisableScroll();for(const e of this._burgerElements.values())e.classList.remove("active");this.#r()}}#r(){for(const e of this._burgerElements.values())e.removeEventListener("click",this.#s)}toString(){return`Status burger: ${this.#e}`}},carousel:function(){const t={data:null,oldCards:[],setCache(e){this.data=e},getCache(){return this.data}};function n(e){t.oldCards=function(){let e,n=[];for(;n.length<3;)e=Math.floor(Math.random()*t.data.length),t.oldCards.includes(e)||n.includes(e)||n.push(e);return n}();let n=e.firstElementChild;for(let e of t.oldCards){n.setAttribute("data-id",e);let i=n.firstElementChild;i.setAttribute("src",t.data[e].img),i.setAttribute("alt",t.data[e].type),i=i.nextElementSibling,i.textContent=t.data[e].name,n=n.nextElementSibling}}const i=document.querySelector(".slider-button_left"),s=document.querySelector(".slider-button_right"),r=document.querySelector(".carousel");let l=r.childNodes[1],a=r.childNodes[1].cloneNode(!0);async function o(){n(a),d(),r.classList.add("active"),a.classList.add("temp-left"),l.style.animation="moveFromLeftToRight 2s",r.append(a)}async function c(){n(a),d(),r.classList.add("active"),a.classList.add("temp-right"),l.style.animation="moveFromRightToLeft 2s",r.append(a)}function d(){i.removeEventListener("click",o),s.removeEventListener("click",c),v(l,"del")}function u(){null===t.data&&async function(){null===t.data&&await async function(){let e=await fetch("../../data/pets.json");if(e.ok){let n=await e.json();t.setCache(n)}else console.log("error",e.status)}(),n(l)}(),i.addEventListener("click",o),s.addEventListener("click",c),v(l,"add")}function m(e,t){let n=e;return[e=t,t=n]}function v(e,t){if("add"===t)for(let t of e.children)t.addEventListener("click",f);else if("del"===t)for(let t of e.children)t.removeEventListener("click",f)}u(),r.addEventListener("animationend",(function(e){"moveFromRightToLeft"===e.animationName?(l.style.animation="",r.querySelector(".card-animal-container:first-child").remove(),r.classList.remove("active"),a.classList.remove("temp-right"),[l,a]=m(l,a),u()):"moveFromLeftToRight"===e.animationName&&(l.style.animation="",r.querySelector(".card-animal-container:first-child").remove(),r.classList.remove("active"),a.classList.remove("temp-left"),[l,a]=m(l,a),u())}));const h=document.querySelector(".modal-window");function f(n){!function(e){let n=h.querySelector(".modal-window__container");n.firstElementChild.firstElementChild.setAttribute("src",t.data[e].img),n.firstElementChild.firstElementChild.setAttribute("alt",t.data[e].type);let i=n.lastElementChild.children;i[0].textContent=t.data[e].name,i[1].textContent=`${t.data[e].type} - ${t.data[e].breed}`,i[2].textContent=t.data[e].description;let s=i[3].children;s[0].firstElementChild.innerHTML=s[0].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${t.data[e].age}`),s[1].firstElementChild.innerHTML=s[1].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${t.data[e].inoculations.join(", ")}`),s[2].firstElementChild.innerHTML=s[2].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${t.data[e].diseases.join(", ")}`),s[3].firstElementChild.innerHTML=s[3].firstElementChild.innerHTML.replace(/(?<=<\/span>).+/gi,` ${t.data[e].parasites.join(", ")}`)}(n.currentTarget.getAttribute("data-id")),h.firstElementChild.addEventListener("click",g),h.lastElementChild.addEventListener("click",g),h.lastElementChild.addEventListener("mouseover",E),h.lastElementChild.addEventListener("mouseout",E),h.classList.add("active"),e.toggleDisableScroll()}function g(){h.classList.remove("active"),e.toggleDisableScroll(),h.firstElementChild.removeEventListener("click",g),h.lastElementChild.removeEventListener("click",g),h.lastElementChild.removeEventListener("mouseover",E),h.lastElementChild.removeEventListener("mouseout",E),document.querySelector(".modal-button").classList.remove("active")}function E(e){"mouseover"==e.type?document.querySelector(".modal-button").classList.add("active"):"mouseout"==e.type&&document.querySelector(".modal-button").classList.remove("active")}}()}})();